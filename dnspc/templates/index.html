<!doctype html>
<html ng-app='pcApp'>
 <head>
  <title>Parental Controls</title>
  <link rel="stylesheet" type="text/css" href="{{url_for('static',filename='parentalcontrols.css')}}" />
  <style>
  </style>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.7/angular.min.js"></script>
  <script src="PCCtrl.js"></script>
 </head>
 <body>
  <div id='head'>
   <div id='title'>Parental Controls</div>
  </div><!-- id='head' -->
  <div id='body'>
    <div id='addrule' class='section'>
     <a href='/addrule.html'>Add Rule</a>
    </div><!-- id='addrule' -->
   <div id=PCCtrl ng-controller="PCCtrl">
    <div><span class='clickable' ng-click='get_rules()'>Reload</span></div>
    <div id='currrules' class='section'>
     <span class='label'>Rules:</span>
      <table id='rules' style='margin:auto'>
       <tr><th></th><th>Src</th><th>Dst</th><th>When</th><th>Action</th></tr>
          <tr ng-repeat='rule in myrules'>
              <td class='del'><span class='clickable' ng-click='del_rule(rule._uid)' >del</span></td>
              <td class='src'>{[rule.src_name | stripdomain]}</td>
              <td class='dst'>{[rule.dst_str]}</td>
              <td class='when'>{[parsedow(rule.dow)]}: {[rule.time_start]} - {[rule.time_end]}</td>
              <td class='act'><span class='{[rule.action]}'>{[rule.action]}</span></td>
          </tr>
      </table>
    </div><!-- id='currrules' -->
   </div>
  </div><!-- id='body' -->
  <script>
  </script>
 </body>
</html>
